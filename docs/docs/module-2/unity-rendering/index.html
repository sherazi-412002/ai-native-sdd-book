<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-module-2/unity-rendering" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Unity Rendering | The Autonomous Humanoid</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://sherazi-412002.github.io/ebsite/docs/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://sherazi-412002.github.io/ebsite/docs/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://sherazi-412002.github.io/ebsite/docs/docs/module-2/unity-rendering"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Unity Rendering | The Autonomous Humanoid"><meta data-rh="true" name="description" content="Visual Rendering in Digital Twins"><meta data-rh="true" property="og:description" content="Visual Rendering in Digital Twins"><link data-rh="true" rel="icon" href="/ebsite/docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://sherazi-412002.github.io/ebsite/docs/docs/module-2/unity-rendering"><link data-rh="true" rel="alternate" href="https://sherazi-412002.github.io/ebsite/docs/docs/module-2/unity-rendering" hreflang="en"><link data-rh="true" rel="alternate" href="https://sherazi-412002.github.io/ebsite/docs/docs/module-2/unity-rendering" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Module 2: The Digital Twin (Gazebo & Unity)","item":"https://sherazi-412002.github.io/ebsite/docs/docs/category/module-2-the-digital-twin-gazebo--unity"},{"@type":"ListItem","position":2,"name":"Unity Rendering","item":"https://sherazi-412002.github.io/ebsite/docs/docs/module-2/unity-rendering"}]}</script><link rel="alternate" type="application/rss+xml" href="/ebsite/docs/blog/rss.xml" title="The Autonomous Humanoid RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/ebsite/docs/blog/atom.xml" title="The Autonomous Humanoid Atom Feed"><link rel="stylesheet" href="/ebsite/docs/assets/css/styles.05341cde.css">
<script src="/ebsite/docs/assets/js/runtime~main.26d53eb8.js" defer="defer"></script>
<script src="/ebsite/docs/assets/js/main.03c87630.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/ebsite/docs/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/ebsite/docs/"><div class="navbar__logo"><img src="/ebsite/docs/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/ebsite/docs/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">The Autonomous Humanoid</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/ebsite/docs/docs/category/module-1-the-robotic-nervous-system-ros-2">Curriculum</a><a class="navbar__item navbar__link" href="/ebsite/docs/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/sherazi-412002/ai-native-sdd-books" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/ebsite/docs/docs/category/module-1-the-robotic-nervous-system-ros-2"><span title="Module 1: The Robotic Nervous System (ROS 2)" class="categoryLinkLabel_W154">Module 1: The Robotic Nervous System (ROS 2)</span></a><button aria-label="Expand sidebar category &#x27;Module 1: The Robotic Nervous System (ROS 2)&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/ebsite/docs/docs/category/module-2-the-digital-twin-gazebo--unity"><span title="Module 2: The Digital Twin (Gazebo &amp; Unity)" class="categoryLinkLabel_W154">Module 2: The Digital Twin (Gazebo &amp; Unity)</span></a><button aria-label="Collapse sidebar category &#x27;Module 2: The Digital Twin (Gazebo &amp; Unity)&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/ebsite/docs/docs/module-2/physics-collisions"><span title="Chapters" class="categoryLinkLabel_W154">Chapters</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ebsite/docs/docs/module-2/physics-collisions"><span title="Physics and Collisions: Advanced Simulation for Digital Twins of Humanoid Robots" class="linkLabel_WmDU">Physics and Collisions: Advanced Simulation for Digital Twins of Humanoid Robots</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/ebsite/docs/docs/module-2/unity-rendering"><span title="Unity Rendering" class="linkLabel_WmDU">Unity Rendering</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ebsite/docs/docs/module-2/sensor-simulation"><span title="Sensor Simulation: Advanced Perceptual Systems for Humanoid Robot Digital Twins" class="linkLabel_WmDU">Sensor Simulation: Advanced Perceptual Systems for Humanoid Robot Digital Twins</span></a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/ebsite/docs/docs/category/module-3-the-ai-robot-brain-nvidia-isaac"><span title="Module 3: The AI-Robot Brain (NVIDIA Isaac‚Ñ¢)" class="categoryLinkLabel_W154">Module 3: The AI-Robot Brain (NVIDIA Isaac‚Ñ¢)</span></a><button aria-label="Expand sidebar category &#x27;Module 3: The AI-Robot Brain (NVIDIA Isaac‚Ñ¢)&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/ebsite/docs/docs/category/module-4-vision-language-action-vla"><span title="Module 4: Vision-Language-Action (VLA)" class="categoryLinkLabel_W154">Module 4: Vision-Language-Action (VLA)</span></a><button aria-label="Expand sidebar category &#x27;Module 4: Vision-Language-Action (VLA)&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="translationPlaceholder_ZaM6 top_YXLs"><div class="translationContainer_wPd3"><span class="translationIcon_SpMr">üåê</span><select class="translationSelect_x1CZ" disabled=""><option>English (en)</option><option disabled="">Urdu (ur) - Coming Soon</option></select><span class="translationBadge_Yny3">Phase 3 Feature</span></div></div><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/ebsite/docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/ebsite/docs/docs/category/module-2-the-digital-twin-gazebo--unity"><span>Module 2: The Digital Twin (Gazebo &amp; Unity)</span></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Chapters</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Unity Rendering</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Unity Rendering</h1></header>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="visual-rendering-in-digital-twins">Visual Rendering in Digital Twins<a href="#visual-rendering-in-digital-twins" class="hash-link" aria-label="Direct link to Visual Rendering in Digital Twins" title="Direct link to Visual Rendering in Digital Twins" translate="no">‚Äã</a></h2>
<p>This chapter covers rendering techniques in Unity for creating realistic digital twins of humanoid robots. Unity&#x27;s rendering pipeline provides advanced capabilities for simulating real-world lighting, materials, and visual effects that are crucial for accurate digital twin representation. In humanoid robotics applications, realistic rendering enables better simulation-to-reality transfer, allowing developers to visualize robot behavior, sensor data, and environmental interactions with high fidelity.</p>
<p>Digital twins require precise visual representation to serve as effective tools for robot development, testing, and validation. Unity&#x27;s flexible rendering system supports Physically-Based Rendering (PBR), advanced lighting models, and real-time performance optimization techniques that are essential for creating believable digital environments. This chapter explores Unity&#x27;s rendering capabilities with a focus on humanoid robot digital twins, covering graphics pipeline optimization, material systems, lighting techniques, and performance considerations.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="unity-graphics-pipeline">Unity Graphics Pipeline<a href="#unity-graphics-pipeline" class="hash-link" aria-label="Direct link to Unity Graphics Pipeline" title="Direct link to Unity Graphics Pipeline" translate="no">‚Äã</a></h2>
<p>Unity&#x27;s Scriptable Render Pipeline (SRP) provides developers with extensive control over the rendering process, allowing customization of how objects are drawn, lit, and processed. For humanoid robot digital twins, understanding the graphics pipeline is crucial for achieving both visual quality and performance.</p>
<p>The rendering pipeline consists of several key stages:</p>
<ol>
<li class=""><strong>Culling</strong>: Determines which objects are visible to the camera and should be rendered</li>
<li class=""><strong>Setup</strong>: Configures rendering states and shader properties</li>
<li class=""><strong>Geometry Processing</strong>: Transforms vertices and applies vertex shaders</li>
<li class=""><strong>Rasterization</strong>: Converts geometry into fragments/pixels</li>
<li class=""><strong>Fragment Processing</strong>: Applies pixel shaders and calculates final colors</li>
<li class=""><strong>Output Merging</strong>: Combines results with depth, stencil, and color buffers</li>
</ol>
<p>For humanoid robots, the pipeline must handle complex articulated models with multiple materials, realistic skin and metal surfaces, and dynamic lighting conditions. Unity&#x27;s SRP allows developers to customize these stages for specific use cases.</p>
<p>Here&#x27;s an example of a custom render pass in Unity&#x27;s Universal Render Pipeline (URP):</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">using UnityEngine;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using UnityEngine.Rendering;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using UnityEngine.Rendering.Universal;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class HumanoidRobotRenderPass : ScriptableRenderPass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static readonly string k_RenderTag = &quot;Humanoid Robot Render Pass&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static readonly int k_SourceId = Shader.PropertyToID(&quot;_SourceTexture&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static readonly int k_DestinationId = Shader.PropertyToID(&quot;_DestinationTexture&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Material m_Material;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private RenderTargetIdentifier m_Source;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private RenderTargetIdentifier m_Destination;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private RenderTextureDescriptor m_Descriptor;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public HumanoidRobotRenderPass(RenderTextureDescriptor descriptor)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        m_Descriptor = descriptor;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        renderPassEvent = RenderPassEvent.AfterRenderingOpaques;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void Setup(RenderTargetIdentifier source, RenderTargetIdentifier destination, Material material)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        m_Source = source;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        m_Destination = destination;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        m_Material = material;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public override void Execute(ScriptableRenderContext context, ref RenderingData renderingData)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (m_Material == null) return;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CommandBuffer cmd = CommandBufferPool.Get(k_RenderTag);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RenderTextureDescriptor opaqueDesc = m_Descriptor;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        opaqueDesc.depthBufferBits = 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Blit source texture to destination texture with custom material</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cmd.SetGlobalTexture(k_SourceId, m_Source);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cmd.Blit(m_Source, m_Destination, m_Material, 0);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        context.ExecuteCommandBuffer(cmd);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CommandBufferPool.Release(cmd);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class HumanoidRobotRendererFeature : ScriptableRendererFeature</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Material material;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private HumanoidRobotRenderPass m_RenderPass;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public override void Create()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        m_RenderPass = new HumanoidRobotRenderPass(base.renderTextureDescriptor);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        m_RenderPass.renderPassEvent = RenderPassEvent.AfterRenderingOpaques;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public override void AddRenderPasses(ScriptableRenderer renderer, ref RenderingData renderingData)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (material == null) return;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        m_RenderPass.Setup(renderer.cameraColorTarget, RenderTargetHandle.CameraTarget.Identifier(), material);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        renderer.EnqueuePass(m_RenderPass);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>The graphics pipeline optimization for humanoid robots involves several considerations:</p>
<ul>
<li class=""><strong>LOD (Level of Detail) Systems</strong>: Implementing multiple versions of robot models with varying polygon counts based on camera distance</li>
<li class=""><strong>Occlusion Culling</strong>: Using Unity&#x27;s occlusion culling to avoid rendering parts of the robot that are not visible</li>
<li class=""><strong>Dynamic Batching</strong>: Combining multiple small robot components for efficient rendering</li>
<li class=""><strong>Shader Variants</strong>: Managing shader permutations to minimize draw calls</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="materials-and-shaders">Materials and Shaders<a href="#materials-and-shaders" class="hash-link" aria-label="Direct link to Materials and Shaders" title="Direct link to Materials and Shaders" translate="no">‚Äã</a></h2>
<p>Unity&#x27;s material system is based on Physically-Based Rendering (PBR), which simulates real-world light interaction with surfaces. For humanoid robots, materials must accurately represent different surface types like metal, plastic, rubber, and composite materials.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="pbr-shader-implementation">PBR Shader Implementation<a href="#pbr-shader-implementation" class="hash-link" aria-label="Direct link to PBR Shader Implementation" title="Direct link to PBR Shader Implementation" translate="no">‚Äã</a></h3>
<p>Here&#x27;s a comprehensive PBR shader implementation suitable for humanoid robot materials:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Shader &quot;Custom/HumanoidRobotPBR&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Properties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _Color (&quot;Color&quot;, Color) = (1,1,1,1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _MainTex (&quot;Albedo (RGB)&quot;, 2D) = &quot;white&quot; {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _Metallic (&quot;Metallic&quot;, Range(0,1)) = 0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _Smoothness (&quot;Smoothness&quot;, Range(0,1)) = 0.5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _BumpMap (&quot;Normal Map&quot;, 2D) = &quot;bump&quot; {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _BumpScale (&quot;Normal Scale&quot;, Float) = 1.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _OcclusionMap (&quot;Occlusion&quot;, 2D) = &quot;white&quot; {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _OcclusionStrength (&quot;Occlusion Strength&quot;, Range(0,1)) = 1.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _EmissionMap (&quot;Emission&quot;, 2D) = &quot;black&quot; {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _EmissionColor (&quot;Emission Color&quot;, Color) = (0,0,0,1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _DetailMask (&quot;Detail Mask&quot;, 2D) = &quot;white&quot; {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _DetailAlbedoMap (&quot;Detail Albedo&quot;, 2D) = &quot;grey&quot; {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _DetailNormalMap (&quot;Detail Normal&quot;, 2D) = &quot;bump&quot; {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _DetailNormalScale (&quot;Detail Normal Scale&quot;, Float) = 1.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _DetailAlbedoScale (&quot;Detail Albedo Scale&quot;, Range(0,1)) = 1.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _RoughnessMap (&quot;Roughness Map&quot;, 2D) = &quot;white&quot; {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _MetallicMap (&quot;Metallic Map&quot;, 2D) = &quot;black&quot; {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SubShader</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Tags { &quot;RenderType&quot;=&quot;Opaque&quot; &quot;RenderPipeline&quot; = &quot;UniversalPipeline&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        LOD 300</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Pass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Name &quot;PBR Forward Pass&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Tags { &quot;LightMode&quot; = &quot;UniversalForward&quot; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            HLSLPROGRAM</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            #pragma vertex vert</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            #pragma fragment frag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            #pragma multi_compile _ _MAIN_LIGHT_SHADOWS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            #pragma multi_compile _ _MAIN_LIGHT_SHADOWS_CASCADE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            #pragma multi_compile _ _SHADOWS_SOFT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            #pragma multi_compile_fog</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            #include &quot;Packages/com.unity.render-pipelines.universal/ShaderLibrary/Core.hlsl&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            #include &quot;Packages/com.unity.render-pipelines.universal/ShaderLibrary/Lighting.hlsl&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            #include &quot;Packages/com.unity.render-pipelines.core/ShaderLibrary/Color.hlsl&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            #include &quot;Packages/com.unity.render-pipelines.core/ShaderLibrary/UnityInstancing.hlsl&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            struct Attributes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float4 positionOS : POSITION;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float3 normalOS : NORMAL;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float4 tangentOS : TANGENT;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float2 uv : TEXCOORD0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float2 uv2 : TEXCOORD1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float2 lightmapUV : TEXCOORD2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                UNITY_VERTEX_INPUT_INSTANCE_ID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            struct Varyings</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float4 positionCS : SV_POSITION;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float3 positionWS : TEXCOORD0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float3 normalWS : TEXCOORD1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float4 tangentWS : TEXCOORD2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float3 bitangentWS : TEXCOORD3;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float2 uv : TEXCOORD4;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float2 lightmapUV : TEXCOORD5;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float4 shadowCoord : TEXCOORD6;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float4 fogFactorAndVertexLight : TEXCOORD7;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                UNITY_VERTEX_INPUT_INSTANCE_ID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                UNITY_VERTEX_OUTPUT_STEREO</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            TEXTURE2D(_MainTex);           SAMPLER(sampler_MainTex);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            TEXTURE2D(_BumpMap);          SAMPLER(sampler_BumpMap);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            TEXTURE2D(_OcclusionMap);     SAMPLER(sampler_OcclusionMap);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            TEXTURE2D(_EmissionMap);      SAMPLER(sampler_EmissionMap);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            TEXTURE2D(_DetailAlbedoMap);  SAMPLER(sampler_DetailAlbedoMap);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            TEXTURE2D(_DetailNormalMap);  SAMPLER(sampler_DetailNormalMap);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            TEXTURE2D(_RoughnessMap);     SAMPLER(sampler_RoughnessMap);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            TEXTURE2D(_MetallicMap);      SAMPLER(sampler_MetallicMap);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            CBUFFER_START(UnityPerMaterial)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float4 _MainTex_ST;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float4 _Color;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float _Metallic;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float _Smoothness;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float _BumpScale;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float _OcclusionStrength;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float _EmissionColor;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float _DetailNormalScale;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float _DetailAlbedoScale;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            CBUFFER_END</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Varyings vert(Attributes input)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Varyings output = (Varyings)0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                UNITY_SETUP_INSTANCE_ID(input);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                UNITY_TRANSFER_INSTANCE_ID(input, output);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                UNITY_INITIALIZE_VERTEX_OUTPUT_STEREO(output);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                VertexPositionInputs vertexInput = GetVertexPositionInputs(input.positionOS.xyz);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                VertexNormalInputs normalInput = GetVertexNormalInputs(input.normalOS, input.tangentOS);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                output.positionCS = vertexInput.positionCS;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                output.positionWS = vertexInput.positionWS;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                output.normalWS = normalInput.normalWS;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                output.tangentWS = float4(normalInput.tangentWS, input.tangentOS.w);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                output.bitangentWS = normalInput.bitangentWS;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                output.uv = TRANSFORM_TEX(input.uv, _MainTex);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                output.lightmapUV = input.lightmapUV;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                output.shadowCoord = TransformWorldToShadowCoord(output.positionWS);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                output.fogFactorAndVertexLight = 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                output.fogFactorAndVertexLight.x = ComputeFogFactor(output.positionCS.z);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                return output;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            half4 frag(Varyings input) : SV_Target</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                UNITY_SETUP_INSTANCE_ID(input);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                UNITY_SETUP_STEREO_EYE_INDEX_POST_VERTEX(input);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float3 positionWS = input.positionWS;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                half3 normalWS = NormalizeNormalPerPixel(input.normalWS);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float2 uv = input.uv;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // Sample textures</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                half4 albedoAlpha = SAMPLE_TEXTURE2D(_MainTex, sampler_MainTex, uv) * _Color;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                half3 albedo = albedoAlpha.rgb;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                half alpha = albedoAlpha.a;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // Sample and unpack normal map</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                half4 normalMapSample = SAMPLE_TEXTURE2D(_BumpMap, sampler_BumpMap, uv);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                half3 normalTS = UnpackNormal(normalMapSample);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                normalTS.xy *= _BumpScale;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                normalTS.z = sqrt(1.0 - saturate(dot(normalTS.xy, normalTS.xy)));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                half3 worldNormal = TransformTangentToWorld(normalTS, half3x3(input.tangentWS.xyz, input.bitangentWS.xyz, input.normalWS));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // Sample material maps</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                half metallic = _Metallic;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                half smoothness = _Smoothness;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if (_MetallicMap)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    metallic *= SAMPLE_TEXTURE2D(_MetallicMap, sampler_MetallicMap, uv).r;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if (_RoughnessMap)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    smoothness *= 1.0 - SAMPLE_TEXTURE2D(_RoughnessMap, sampler_RoughnessMap, uv).r;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // Occlusion</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                half occlusion = SAMPLE_TEXTURE2D(_OcclusionMap, sampler_OcclusionMap, uv).r;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                occlusion = lerp(1.0, occlusion, _OcclusionStrength);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // Emission</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                half3 emission = SAMPLE_TEXTURE2D(_EmissionMap, sampler_EmissionMap, uv).rgb * _EmissionColor.rgb;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // Detail maps</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float2 detailUV = uv * 4.0; // Scale for detail tiling</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                half3 detailAlbedo = SAMPLE_TEXTURE2D(_DetailAlbedoMap, sampler_DetailAlbedoMap, detailUV).rgb;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                detailAlbedo = lerp(half3(1.0, 1.0, 1.0), detailAlbedo, _DetailAlbedoScale);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                albedo *= detailAlbedo;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                half4 detailNormalSample = SAMPLE_TEXTURE2D(_DetailNormalMap, sampler_DetailNormalMap, detailUV);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                half3 detailNormalTS = UnpackNormal(detailNormalSample);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                detailNormalTS.xy *= _DetailNormalScale;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                detailNormalTS.z = sqrt(1.0 - saturate(dot(detailNormalTS.xy, detailNormalTS.xy)));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // Blend normals</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                worldNormal = BlendNormal(worldNormal, TransformTangentToWorld(detailNormalTS, half3x3(input.tangentWS.xyz, input.bitangentWS.xyz, input.normalWS)));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // Lighting calculations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Light mainLight = GetMainLight(input.shadowCoord);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                half3 viewDir = GetWorldSpaceNormalizeViewDir(positionWS);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                BRDFData brdfData;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                InitializeBRDFData(albedo, metallic, smoothness, alpha, brdfData);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                half3 diffuse = LightingLambert(mainLight.color, mainLight.direction, worldNormal);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                half3 specular = LightingSpecular(mainLight.color, mainLight.direction, worldNormal, viewDir, brdfData.reflectivity, brdfData.perceptualRoughness);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                half3 color = brdfData.diffuse + brdfData.specular + emission;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                color *= occlusion;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // Apply fog</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                color = MixFog(color, input.fogFactorAndVertexLight.x);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                return half4(color, alpha);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ENDHLSL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Pass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Name &quot;ShadowCaster&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Tags { &quot;LightMode&quot; = &quot;ShadowCaster&quot; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ZWrite On</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ZTest LEqual</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ColorMask 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            HLSLPROGRAM</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            #pragma vertex ShadowPassVertex</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            #pragma fragment ShadowPassFragment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            #include &quot;Packages/com.unity.render-pipelines.universal/ShaderLibrary/Lighting.hlsl&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            float3 _LightDirection;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            struct Attributes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float4 positionOS : POSITION;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float3 normalOS : NORMAL;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float2 uv : TEXCOORD0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                UNITY_VERTEX_INPUT_INSTANCE_ID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            struct Varyings</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float2 uv : TEXCOORD0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float4 positionCS : SV_POSITION;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                UNITY_VERTEX_INPUT_INSTANCE_ID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                UNITY_VERTEX_OUTPUT_STEREO</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Varyings ShadowPassVertex(Attributes input)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Varyings output;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                UNITY_SETUP_INSTANCE_ID(input);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                UNITY_TRANSFER_INSTANCE_ID(input, output);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                UNITY_INITIALIZE_VERTEX_OUTPUT_STEREO(output);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float3 positionWS = TransformObjectToWorld(input.positionOS.xyz);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float3 normalWS = TransformObjectToWorldNormal(input.normalOS);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float4 positionCS = TransformWorldToHClip(ApplyShadowBias(positionWS, normalWS, _LightDirection));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                output.positionCS = positionCS;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                output.uv = TRANSFORM_TEX(input.uv, _MainTex);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                return output;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            half4 ShadowPassFragment(Varyings input) : SV_TARGET</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                UNITY_SETUP_INSTANCE_ID(input);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float4 albedoAlpha = SAMPLE_TEXTURE2D(_MainTex, sampler_MainTex, input.uv) * _Color;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                clip(albedoAlpha.a - 0.001);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                return 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ENDHLSL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Fallback &quot;Universal Render Pipeline/Lit&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CustomEditor &quot;HumanoidRobotPBRGUI&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="material-system-for-robot-components">Material System for Robot Components<a href="#material-system-for-robot-components" class="hash-link" aria-label="Direct link to Material System for Robot Components" title="Direct link to Material System for Robot Components" translate="no">‚Äã</a></h3>
<p>For humanoid robots, different components require specialized materials:</p>
<ul>
<li class=""><strong>Metallic Surfaces</strong>: High metallic values with low roughness for realistic metal reflections</li>
<li class=""><strong>Plastic Components</strong>: Low metallic values with variable roughness for different plastic types</li>
<li class=""><strong>LED Indicators</strong>: Emissive materials for status lights and indicators</li>
<li class=""><strong>Sensor Covers</strong>: Transparent materials with specific transmission properties</li>
<li class=""><strong>Joint Mechanisms</strong>: Materials that show mechanical details and wear patterns</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="shader-graph-implementation">Shader Graph Implementation<a href="#shader-graph-implementation" class="hash-link" aria-label="Direct link to Shader Graph Implementation" title="Direct link to Shader Graph Implementation" translate="no">‚Äã</a></h3>
<p>Unity&#x27;s Shader Graph provides a visual approach to creating custom shaders for humanoid robot materials. Here&#x27;s an example implementation for creating a robot-specific material:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">using UnityEngine;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using UnityEngine.Rendering;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using UnityEngine.Rendering.Universal;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[CreateAssetMenu(fileName = &quot;RobotMaterialData&quot;, menuName = &quot;Robot Rendering/Material Data&quot;)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class RobotMaterialData : ScriptableObject</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [Header(&quot;Surface Properties&quot;)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Color baseColor = Color.gray;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public float metallic = 0.8f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public float smoothness = 0.4f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Texture2D albedoMap;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Texture2D normalMap;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Texture2D metallicMap;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Texture2D roughnessMap;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [Header(&quot;Detail Properties&quot;)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Texture2D detailAlbedo;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Texture2D detailNormal;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public float detailAlbedoScale = 1.0f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public float detailNormalScale = 1.0f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [Header(&quot;Emission Properties&quot;)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public bool hasEmission = false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Color emissionColor = Color.black;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Texture2D emissionMap;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [Header(&quot;Robot-Specific Properties&quot;)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public bool isWornSurface = false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public float wearIntensity = 0.0f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Color wearColor = Color.red;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Texture2D wearMask;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Material CreateRobotMaterial()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Material material = new Material(Shader.Find(&quot;Custom/HumanoidRobotPBR&quot;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        material.SetColor(&quot;_Color&quot;, baseColor);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        material.SetFloat(&quot;_Metallic&quot;, metallic);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        material.SetFloat(&quot;_Smoothness&quot;, smoothness);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (albedoMap != null) material.SetTexture(&quot;_MainTex&quot;, albedoMap);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (normalMap != null) material.SetTexture(&quot;_BumpMap&quot;, normalMap);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (metallicMap != null) material.SetTexture(&quot;_MetallicMap&quot;, metallicMap);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (roughnessMap != null) material.SetTexture(&quot;_RoughnessMap&quot;, roughnessMap);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (detailAlbedo != null) material.SetTexture(&quot;_DetailAlbedoMap&quot;, detailAlbedo);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (detailNormal != null) material.SetTexture(&quot;_DetailNormalMap&quot;, detailNormal);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        material.SetFloat(&quot;_DetailAlbedoScale&quot;, detailAlbedoScale);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        material.SetFloat(&quot;_DetailNormalScale&quot;, detailNormalScale);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (hasEmission)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            material.EnableKeyword(&quot;_EMISSION&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            material.SetColor(&quot;_EmissionColor&quot;, emissionColor);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (emissionMap != null) material.SetTexture(&quot;_EmissionMap&quot;, emissionMap);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            material.DisableKeyword(&quot;_EMISSION&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return material;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="lighting-systems">Lighting Systems<a href="#lighting-systems" class="hash-link" aria-label="Direct link to Lighting Systems" title="Direct link to Lighting Systems" translate="no">‚Äã</a></h2>
<p>Lighting is crucial for creating realistic digital twins that accurately represent real-world conditions. Unity supports multiple lighting systems that can be configured for humanoid robot environments.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="realistic-lighting-setup">Realistic Lighting Setup<a href="#realistic-lighting-setup" class="hash-link" aria-label="Direct link to Realistic Lighting Setup" title="Direct link to Realistic Lighting Setup" translate="no">‚Äã</a></h3>
<p>For humanoid robot digital twins, lighting must simulate various real-world conditions:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">using UnityEngine;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using UnityEngine.Rendering;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using UnityEngine.Rendering.Universal;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class HumanoidRobotLightingSystem : MonoBehaviour</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [Header(&quot;Lighting Configuration&quot;)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Light mainDirectionalLight;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Light[] additionalLights;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public bool useRealisticShadows = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public float shadowDistance = 50.0f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public float shadowResolution = 2048.0f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [Header(&quot;Environment Lighting&quot;)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Cubemap reflectionCubemap;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public float reflectionIntensity = 1.0f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Color ambientColor = Color.gray;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [Header(&quot;Dynamic Lighting&quot;)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public bool enableDynamicLighting = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public float lightingUpdateRate = 0.1f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private float m_LastUpdate;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    void Start()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SetupLighting();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        m_LastUpdate = Time.time;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    void Update()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (enableDynamicLighting &amp;&amp; Time.time - m_LastUpdate &gt; lightingUpdateRate)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            UpdateDynamicLighting();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            m_LastUpdate = Time.time;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void SetupLighting()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Configure main directional light</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (mainDirectionalLight != null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            mainDirectionalLight.type = LightType.Directional;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            mainDirectionalLight.shadows = LightShadows.Soft;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            mainDirectionalLight.shadowStrength = 0.8f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            mainDirectionalLight.shadowBias = 0.05f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            mainDirectionalLight.shadowNormalBias = 0.4f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            mainDirectionalLight.shadowNearPlane = 0.2f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Configure additional lights</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (additionalLights != null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            foreach (Light light in additionalLights)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ConfigureAdditionalLight(light);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Set up environment lighting</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RenderSettings.ambientMode = UnityEngine.Rendering.AmbientMode.Trilight;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RenderSettings.ambientSkyColor = ambientColor * 0.7f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RenderSettings.ambientEquatorColor = ambientColor * 0.5f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RenderSettings.ambientGroundColor = ambientColor * 0.3f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Configure reflection probes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SetupReflectionProbes();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void ConfigureAdditionalLight(Light light)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Configure based on light type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        switch (light.type)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            case LightType.Point:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                light.shadows = LightShadows.Soft;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                light.range = Mathf.Max(light.range, 10.0f);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            case LightType.Spot:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                light.shadows = LightShadows.Soft;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                light.spotAngle = Mathf.Clamp(light.spotAngle, 30.0f, 120.0f);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            case LightType.Directional:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                light.shadows = LightShadows.Soft;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Set realistic intensity based on light type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (light.type == LightType.Point || light.type == LightType.Spot)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            light.intensity = Mathf.Clamp(light.intensity, 0.5f, 3.0f);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        else if (light.type == LightType.Directional)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            light.intensity = Mathf.Clamp(light.intensity, 0.5f, 2.0f);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void SetupReflectionProbes()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Create and configure reflection probes for the humanoid robot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        GameObject[] robotParts = GameObject.FindGameObjectsWithTag(&quot;RobotPart&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        foreach (GameObject part in robotParts)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // Add reflection probe to important robot parts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (part.GetComponent&lt;Renderer&gt;() != null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ReflectionProbe probe = part.AddComponent&lt;ReflectionProbe&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                probe.mode = ReflectionProbeMode.Realtime;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                probe.size = new Vector3(5.0f, 5.0f, 5.0f);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                probe.center = Vector3.zero;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                probe.resolution = 512;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                probe.refreshMode = ReflectionProbeRefreshMode.EveryFrame;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                probe.timeSlicingMode = ReflectionProbeTimeSlicingMode.IndividualFaces;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void UpdateDynamicLighting()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Update lighting based on time of day or other dynamic factors</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        float timeOfDay = (Mathf.Sin(Time.time * 0.1f) + 1.0f) * 0.5f; // 0-1 cycle</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Adjust main light direction and intensity based on time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (mainDirectionalLight != null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Vector3 lightDirection = new Vector3(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Mathf.Sin(timeOfDay * Mathf.PI * 2) * 0.7f,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                -Mathf.Cos(timeOfDay * Mathf.PI * 2) * 0.8f - 0.2f,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Mathf.Cos(timeOfDay * Mathf.PI * 2) * 0.5f</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            mainDirectionalLight.transform.rotation = Quaternion.LookRotation(lightDirection);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            mainDirectionalLight.intensity = Mathf.Lerp(0.8f, 1.2f, timeOfDay);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Update ambient lighting</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Color ambient = Color.Lerp(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            new Color(0.2f, 0.2f, 0.3f),  // Cool ambient</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            new Color(0.3f, 0.25f, 0.2f), // Warm ambient</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            timeOfDay</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RenderSettings.ambientSkyColor = ambient * 0.7f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RenderSettings.ambientEquatorColor = ambient * 0.5f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RenderSettings.ambientGroundColor = ambient * 0.3f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Method to set up lighting for specific scenarios</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void SetupScenarioLighting(string scenario)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        switch (scenario)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            case &quot;indoor_daylight&quot;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                SetupIndoorDaylight();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            case &quot;indoor_night&quot;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                SetupIndoorNight();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            case &quot;outdoor_day&quot;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                SetupOutdoorDay();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            case &quot;outdoor_night&quot;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                SetupOutdoorNight();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            case &quot;factory_floor&quot;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                SetupFactoryFloor();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            default:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                SetupDefaultLighting();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void SetupIndoorDaylight()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (mainDirectionalLight != null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            mainDirectionalLight.color = Color.white;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            mainDirectionalLight.intensity = 1.0f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            mainDirectionalLight.transform.rotation = Quaternion.Euler(50, -30, 0);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RenderSettings.ambientMode = UnityEngine.Rendering.AmbientMode.Trilight;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RenderSettings.ambientSkyColor = new Color(0.212f, 0.227f, 0.259f);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RenderSettings.ambientEquatorColor = new Color(0.114f, 0.125f, 0.133f);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RenderSettings.ambientGroundColor = new Color(0.047f, 0.043f, 0.035f);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void SetupIndoorNight()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (mainDirectionalLight != null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            mainDirectionalLight.color = new Color(0.8f, 0.9f, 1.0f);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            mainDirectionalLight.intensity = 0.5f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            mainDirectionalLight.transform.rotation = Quaternion.Euler(45, -120, 0);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Add artificial lights for indoor night scenario</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        AddArtificialIndoorLights();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void AddArtificialIndoorLights()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Create artificial lights for indoor environment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        GameObject[] lightPositions = GameObject.FindGameObjectsWithTag(&quot;LightPosition&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        foreach (GameObject pos in lightPositions)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            GameObject lightObj = new GameObject(&quot;Artificial Light&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            lightObj.transform.SetParent(pos.transform);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            lightObj.transform.localPosition = Vector3.zero;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Light light = lightObj.AddComponent&lt;Light&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            light.type = LightType.Point;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            light.color = new Color(0.9f, 0.8f, 0.6f); // Warm white</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            light.range = 15.0f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            light.intensity = 1.5f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            light.shadows = LightShadows.Soft;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void SetupOutdoorDay()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (mainDirectionalLight != null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            mainDirectionalLight.color = Color.white;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            mainDirectionalLight.intensity = 1.5f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            mainDirectionalLight.transform.rotation = Quaternion.Euler(50, 150, 0);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RenderSettings.ambientMode = UnityEngine.Rendering.AmbientMode.Trilight;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RenderSettings.ambientSkyColor = new Color(0.5f, 0.55f, 0.8f);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RenderSettings.ambientEquatorColor = new Color(0.7f, 0.6f, 0.5f);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RenderSettings.ambientGroundColor = new Color(0.2f, 0.2f, 0.2f);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void SetupOutdoorNight()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (mainDirectionalLight != null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            mainDirectionalLight.color = new Color(0.2f, 0.2f, 0.4f); // Moonlight</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            mainDirectionalLight.intensity = 0.2f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            mainDirectionalLight.transform.rotation = Quaternion.Euler(130, 45, 0);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RenderSettings.ambientMode = UnityEngine.Rendering.AmbientMode.Trilight;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RenderSettings.ambientSkyColor = new Color(0.05f, 0.05f, 0.1f);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RenderSettings.ambientEquatorColor = new Color(0.02f, 0.02f, 0.05f);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RenderSettings.ambientGroundColor = new Color(0.01f, 0.01f, 0.02f);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void SetupFactoryFloor()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (mainDirectionalLight != null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            mainDirectionalLight.color = new Color(0.9f, 0.9f, 0.95f); // Industrial lighting</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            mainDirectionalLight.intensity = 1.2f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            mainDirectionalLight.transform.rotation = Quaternion.Euler(60, -45, 0);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Add industrial-style artificial lights</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        AddIndustrialLights();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void AddIndustrialLights()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Create industrial lighting setup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (int i = 0; i &lt; 8; i++)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            GameObject lightObj = new GameObject($&quot;Industrial Light {i}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            lightObj.transform.position = new Vector3(i * 5.0f, 8.0f, 0);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Light light = lightObj.AddComponent&lt;Light&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            light.type = LightType.Spot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            light.color = new Color(0.95f, 0.95f, 0.9f);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            light.range = 20.0f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            light.spotAngle = 60.0f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            light.intensity = 2.0f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            light.shadows = LightShadows.Soft;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void SetupDefaultLighting()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (mainDirectionalLight != null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            mainDirectionalLight.color = Color.white;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            mainDirectionalLight.intensity = 1.0f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            mainDirectionalLight.transform.rotation = Quaternion.Euler(50, -30, 0);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="lighting-diagram">Lighting Diagram<a href="#lighting-diagram" class="hash-link" aria-label="Direct link to Lighting Diagram" title="Direct link to Lighting Diagram" translate="no">‚Äã</a></h3>
<p>Here&#x27;s a Mermaid.js diagram showing the lighting architecture for humanoid robot digital twins:</p>
<div class="language-mermaid codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-mermaid codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">graph TB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    A[Humanoid Robot Digital Twin] --&gt; B[Main Directional Light]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    A --&gt; C[Point Lights]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    A --&gt; D[Spot Lights]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    A --&gt; E[Reflection Probes]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    B --&gt; F[Shadow Mapping]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    C --&gt; G[Local Illumination]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    D --&gt; H[Task Lighting]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    E --&gt; I[Environment Reflections]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    F --&gt; J[Real-time Shadows]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    G --&gt; K[Robot Component Lighting]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    H --&gt; L[Sensor Area Lighting]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    I --&gt; M[Dynamic Reflections]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    J --&gt; N[Shadow Distance: 50m]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    K --&gt; O[Material-based Response]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    L --&gt; P[Interactive Lighting]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    M --&gt; Q[Cubemap Updates]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    style A fill:#e1f5fe</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    style B fill:#f3e5f5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    style C fill:#e8f5e8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    style D fill:#fff3e0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    style E fill:#fce4ec</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="post-processing-effects">Post-Processing Effects<a href="#post-processing-effects" class="hash-link" aria-label="Direct link to Post-Processing Effects" title="Direct link to Post-Processing Effects" translate="no">‚Äã</a></h2>
<p>Post-processing effects enhance the visual quality of humanoid robot digital twins by adding realistic camera effects, color grading, and atmospheric effects.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="post-processing-implementation">Post-Processing Implementation<a href="#post-processing-implementation" class="hash-link" aria-label="Direct link to Post-Processing Implementation" title="Direct link to Post-Processing Implementation" translate="no">‚Äã</a></h3>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">using UnityEngine;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using UnityEngine.Rendering;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using UnityEngine.Rendering.Universal;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[RequireComponent(typeof(Volume))]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class HumanoidRobotPostProcessing : MonoBehaviour</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [Header(&quot;Depth of Field&quot;)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public bool enableDepthOfField = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public float dofFocusDistance = 10.0f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public float dofAperture = 5.6f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public float dofFocalLength = 50.0f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [Header(&quot;Color Grading&quot;)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public bool enableColorGrading = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Color temperatureShift = Color.white;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public float saturation = 1.0f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public float contrast = 1.0f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [Header(&quot;Bloom&quot;)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public bool enableBloom = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public float bloomIntensity = 0.5f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public float bloomThreshold = 1.0f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public float bloomScatter = 0.7f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [Header(&quot;Motion Blur&quot;)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public bool enableMotionBlur = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public float motionBlurIntensity = 0.5f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [Header(&quot;Chromatic Aberration&quot;)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public bool enableChromaticAberration = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public float chromaticAberrationIntensity = 0.1f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Volume m_Volume;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private DepthOfField m_DepthOfField;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private ColorAdjustments m_ColorAdjustments;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Bloom m_Bloom;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private MotionBlur m_MotionBlur;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private ChromaticAberration m_ChromaticAberration;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    void Start()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SetupPostProcessing();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    void Update()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        UpdatePostProcessing();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void SetupPostProcessing()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        m_Volume = GetComponent&lt;Volume&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Get or create post-processing effects</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        m_Volume.profile.TryGet(out m_DepthOfField);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (m_DepthOfField == null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            m_Volume.profile.Add&lt;DepthOfField&gt;(true);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            m_Volume.profile.TryGet(out m_DepthOfField);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        m_Volume.profile.TryGet(out m_ColorAdjustments);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (m_ColorAdjustments == null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            m_Volume.profile.Add&lt;ColorAdjustments&gt;(true);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            m_Volume.profile.TryGet(out m_ColorAdjustments);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        m_Volume.profile.TryGet(out m_Bloom);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (m_Bloom == null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            m_Volume.profile.Add&lt;Bloom&gt;(true);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            m_Volume.profile.TryGet(out m_Bloom);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        m_Volume.profile.TryGet(out m_MotionBlur);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (m_MotionBlur == null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            m_Volume.profile.Add&lt;MotionBlur&gt;(true);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            m_Volume.profile.TryGet(out m_MotionBlur);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        m_Volume.profile.TryGet(out m_ChromaticAberration);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (m_ChromaticAberration == null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            m_Volume.profile.Add&lt;ChromaticAberration&gt;(true);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            m_Volume.profile.TryGet(out m_ChromaticAberration);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        UpdatePostProcessing();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void UpdatePostProcessing()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (m_DepthOfField != null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            m_DepthOfField.active = enableDepthOfField;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (enableDepthOfField)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                m_DepthOfField.focusDistance.value = dofFocusDistance;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                m_DepthOfField.aperture.value = dofAperture;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                m_DepthOfField.focalLength.value = dofFocalLength;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (m_ColorAdjustments != null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            m_ColorAdjustments.active = enableColorGrading;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (enableColorGrading)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                m_ColorAdjustments.temperature.value = GetTemperatureValue(temperatureShift);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                m_ColorAdjustments.saturation.value = (saturation - 1.0f) * 20.0f; // Convert to -20 to 20 range</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                m_ColorAdjustments.contrast.value = (contrast - 1.0f) * 20.0f; // Convert to -20 to 20 range</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (m_Bloom != null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            m_Bloom.active = enableBloom;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (enableBloom)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                m_Bloom.intensity.value = bloomIntensity;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                m_Bloom.threshold.value = bloomThreshold;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                m_Bloom.scatter.value = bloomScatter;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (m_MotionBlur != null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            m_MotionBlur.active = enableMotionBlur;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (enableMotionBlur)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                m_MotionBlur.intensity.value = motionBlurIntensity;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (m_ChromaticAberration != null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            m_ChromaticAberration.active = enableChromaticAberration;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (enableChromaticAberration)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                m_ChromaticAberration.intensity.value = chromaticAberrationIntensity;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private float GetTemperatureValue(Color color)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Convert color temperature to Unity&#x27;s temperature adjustment value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        float avg = (color.r + color.g + color.b) / 3.0f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return (avg - 0.5f) * 100.0f; // Convert to -50 to 50 range</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Method to adjust post-processing for different viewing scenarios</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void SetViewingScenario(string scenario)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        switch (scenario)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            case &quot;close_up&quot;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                SetCloseUpViewing();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            case &quot;wide_shot&quot;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                SetWideShotViewing();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            case &quot;detailed_inspection&quot;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                SetDetailedInspectionViewing();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            case &quot;environment_overview&quot;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                SetEnvironmentOverviewViewing();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            default:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                SetDefaultViewing();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void SetCloseUpViewing()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        enableDepthOfField = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        dofFocusDistance = 2.0f; // Close focus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        dofAperture = 2.8f;      // Shallow depth of field</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        dofFocalLength = 85.0f;  // Telephoto effect</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        enableBloom = false;     // Reduce bloom for close inspection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bloomIntensity = 0.1f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        enableMotionBlur = false; // Disable motion blur for detailed view</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        motionBlurIntensity = 0.0f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void SetWideShotViewing()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        enableDepthOfField = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        dofFocusDistance = 15.0f; // Medium distance focus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        dofAperture = 8.0f;       // Deeper depth of field</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        dofFocalLength = 35.0f;   // Wide angle effect</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        enableBloom = true;       // Enhance overall scene</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bloomIntensity = 0.3f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        enableMotionBlur = true;  // Add subtle motion blur</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        motionBlurIntensity = 0.2f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void SetDetailedInspectionViewing()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        enableDepthOfField = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        dofFocusDistance = 0.5f;  // Very close focus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        dofAperture = 1.4f;       // Very shallow depth of field</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        dofFocalLength = 100.0f;  // Macro lens effect</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        enableColorGrading = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        saturation = 1.2f;        // Enhance material details</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        contrast = 1.1f;          // Increase contrast for details</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        enableBloom = false;      // Reduce bloom for clarity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        enableMotionBlur = false; // Disable motion blur for clarity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void SetEnvironmentOverviewViewing()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        enableDepthOfField = false; // No depth of field for overview</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        enableBloom = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bloomIntensity = 0.4f;      // Enhance environment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bloomThreshold = 0.8f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        enableColorGrading = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        saturation = 0.9f;          // Slightly desaturated for overview</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        contrast = 1.0f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        enableMotionBlur = true;    // Add motion blur for dynamic scenes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        motionBlurIntensity = 0.3f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void SetDefaultViewing()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        enableDepthOfField = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        dofFocusDistance = 10.0f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        dofAperture = 5.6f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        dofFocalLength = 50.0f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        enableColorGrading = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        saturation = 1.0f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        contrast = 1.0f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        enableBloom = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bloomIntensity = 0.5f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bloomThreshold = 1.0f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        enableMotionBlur = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        motionBlurIntensity = 0.5f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        enableChromaticAberration = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        chromaticAberrationIntensity = 0.1f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="custom-post-processing-effect-for-robot-vision">Custom Post-Processing Effect for Robot Vision<a href="#custom-post-processing-effect-for-robot-vision" class="hash-link" aria-label="Direct link to Custom Post-Processing Effect for Robot Vision" title="Direct link to Custom Post-Processing Effect for Robot Vision" translate="no">‚Äã</a></h3>
<div class="language-hlsl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hlsl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Robot Vision Post-Processing Shader</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Shader &quot;Custom/RobotVisionEffect&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Properties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _MainTex (&quot;Texture&quot;, 2D) = &quot;white&quot; {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _EdgeColor (&quot;Edge Color&quot;, Color) = (1, 1, 1, 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _EdgeThreshold (&quot;Edge Threshold&quot;, Range(0.0, 1.0)) = 0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _RobotVisionIntensity (&quot;Robot Vision Intensity&quot;, Range(0.0, 1.0)) = 0.5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _GridSize (&quot;Grid Size&quot;, Float) = 64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _GridColor (&quot;Grid Color&quot;, Color) = (0, 1, 0, 0.2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SubShader</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Cull Off ZWrite Off ZTest Always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Pass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            HLSLPROGRAM</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            #pragma vertex vert</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            #pragma fragment frag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            #include &quot;UnityCG.cginc&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            struct appdata</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float4 vertex : POSITION;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float2 uv : TEXCOORD0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            struct v2f</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float2 uv : TEXCOORD0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float4 vertex : SV_POSITION;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            v2f vert (appdata v)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                v2f o;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                o.vertex = UnityObjectToClipPos(v.vertex);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                o.uv = v.uv;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                return o;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            sampler2D _MainTex;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            float4 _MainTex_TexelSize;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            float4 _EdgeColor;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            float _EdgeThreshold;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            float _RobotVisionIntensity;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            float _GridSize;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            float4 _GridColor;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            fixed4 frag (v2f i) : SV_Target</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // Sample the main texture</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                fixed4 col = tex2D(_MainTex, i.uv);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // Edge detection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float2 dx = float2(_MainTex_TexelSize.x, 0.0);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float2 dy = float2(0.0, _MainTex_TexelSize.y);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float3 center = tex2D(_MainTex, i.uv).rgb;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float3 left = tex2D(_MainTex, i.uv - dx).rgb;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float3 right = tex2D(_MainTex, i.uv + dx).rgb;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float3 up = tex2D(_MainTex, i.uv - dy).rgb;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float3 down = tex2D(_MainTex, i.uv + dy).rgb;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float3 gradientX = (right - left);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float3 gradientY = (up - down);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float gradientMagnitude = length(gradientX) + length(gradientY);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // Create edge effect</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float edge = step(_EdgeThreshold, gradientMagnitude);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                fixed3 edgeEffect = lerp(col.rgb, _EdgeColor.rgb, edge * _RobotVisionIntensity);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // Add grid overlay</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float2 gridUV = i.uv * _GridSize;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float2 grid = abs(frac(gridUV) - 0.5);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float gridLine = min(grid.x, grid.y);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                gridLine = step(0.45, gridLine);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // Combine effects</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                fixed3 finalColor = lerp(edgeEffect, _GridColor.rgb, gridLine * _GridColor.a * _RobotVisionIntensity);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                return fixed4(finalColor, col.a);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ENDHLSL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="performance-optimization">Performance Optimization<a href="#performance-optimization" class="hash-link" aria-label="Direct link to Performance Optimization" title="Direct link to Performance Optimization" translate="no">‚Äã</a></h2>
<p>Performance optimization is critical for real-time humanoid robot digital twins, especially when running complex simulations with multiple robots and detailed environments.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="rendering-optimization-techniques">Rendering Optimization Techniques<a href="#rendering-optimization-techniques" class="hash-link" aria-label="Direct link to Rendering Optimization Techniques" title="Direct link to Rendering Optimization Techniques" translate="no">‚Äã</a></h3>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">using UnityEngine;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using System.Collections.Generic;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class HumanoidRobotRenderingOptimizer : MonoBehaviour</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [Header(&quot;LOD Configuration&quot;)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public int lodCount = 4;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public float[] lodDistances = { 10.0f, 25.0f, 50.0f, 100.0f };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public bool enableLOD = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [Header(&quot;Occlusion Culling&quot;)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public bool enableOcclusionCulling = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public float occlusionCheckInterval = 0.5f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [Header(&quot;Dynamic Batching&quot;)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public bool enableDynamicBatching = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public int maxBatchSize = 300;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [Header(&quot;Texture Streaming&quot;)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public bool enableTextureStreaming = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public float textureQuality = 1.0f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [Header(&quot;Shader Optimization&quot;)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public bool enableShaderLOD = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public int shaderLODLevel = 300;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Dictionary&lt;Renderer, LODGroup&gt; m_LODGroups = new Dictionary&lt;Renderer, LODGroup&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Dictionary&lt;Renderer, Material[]&gt; m_OriginalMaterials = new Dictionary&lt;Renderer, Material[]&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private float m_LastOcclusionCheck = 0.0f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    void Start()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SetupOptimization();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    void Update()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (enableOcclusionCulling &amp;&amp; Time.time - m_LastOcclusionCheck &gt; occlusionCheckInterval)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            CheckOcclusion();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            m_LastOcclusionCheck = Time.time;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        OptimizeRendering();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void SetupOptimization()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Set up global rendering settings</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        QualitySettings.anisotropicFiltering = AnisotropicFiltering.Enable;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        QualitySettings.vSyncCount = 0; // Disable VSync for better performance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        QualitySettings.maxQueuedFrames = 2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (enableTextureStreaming)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            QualitySettings.streamingMipmapsActive = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            QualitySettings.streamingMipmapsMemoryBudget = 512.0f; // 512 MB budget</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            QualitySettings.streamingMipmapsRenderersPerFrame = 512;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            QualitySettings.streamingMipmapsMaxLevelReduction = 2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Create LOD groups for robot parts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (enableLOD)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            SetupLODGroups();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Configure shader LOD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (enableShaderLOD)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Shader.globalMaximumLOD = shaderLODLevel;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void SetupLODGroups()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Find all robot parts and set up LOD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        GameObject[] robotParts = GameObject.FindGameObjectsWithTag(&quot;RobotPart&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        foreach (GameObject part in robotParts)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Renderer renderer = part.GetComponent&lt;Renderer&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (renderer != null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // Store original materials for LOD switching</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                m_OriginalMaterials[renderer] = renderer.sharedMaterials;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // Create LOD group if needed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                LODGroup lodGroup = part.GetComponent&lt;LODGroup&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if (lodGroup == null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    lodGroup = part.AddComponent&lt;LODGroup&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    m_LODGroups[renderer] = lodGroup;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    // Create LOD levels</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    LOD[] lods = new LOD[lodCount];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    for (int i = 0; i &lt; lodCount; i++)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        // Calculate screen relative transition height</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        float screenRelativeTransitionHeight = (lodDistances[i] / 100.0f) * 0.5f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        // Create renderer array for this LOD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        Renderer[] renderers = { renderer };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        lods[i] = new LOD(screenRelativeTransitionHeight, renderers);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        // Create simplified materials for lower LODs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        if (i &gt; 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            Material[] simplifiedMaterials = new Material[renderer.sharedMaterials.Length];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            for (int j = 0; j &lt; renderer.sharedMaterials.Length; j++)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                simplifiedMaterials[j] = CreateSimplifiedMaterial(renderer.sharedMaterials[j], i);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            lods[i].renderers[0].sharedMaterials = simplifiedMaterials;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    lodGroup.SetLODs(lods);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    lodGroup.RecalculateBounds();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Material CreateSimplifiedMaterial(Material original, int lodLevel)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Create a simplified version of the material based on LOD level</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Material simplified = new Material(original.shader);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Copy essential properties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        simplified.color = original.color;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        simplified.mainTexture = original.mainTexture;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Reduce complexity for lower LODs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (lodLevel &gt;= 2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // Remove expensive properties for very low LOD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            simplified.EnableKeyword(&quot;_NORMALMAP_OFF&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            simplified.EnableKeyword(&quot;_EMISSION_OFF&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            simplified.EnableKeyword(&quot;_DETAIL_OFF&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (lodLevel &gt;= 3)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // Further simplify for lowest LOD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            simplified.SetFloat(&quot;_Metallic&quot;, 0.0f); // Remove metallic effect</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            simplified.SetFloat(&quot;_Smoothness&quot;, 0.5f); // Use default smoothness</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return simplified;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void CheckOcclusion()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Perform occlusion queries for robot parts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        foreach (Renderer renderer in m_OriginalMaterials.Keys)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (renderer != null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // Check if renderer is visible</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                bool isVisible = IsRendererVisible(renderer);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // Adjust rendering based on visibility</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                renderer.enabled = isVisible;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private bool IsRendererVisible(Renderer renderer)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Check if renderer is in camera frustum</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Plane[] planes = GeometryUtility.CalculateFrustumPlanes(Camera.main);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return GeometryUtility.TestPlanesAABB(planes, renderer.bounds);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void OptimizeRendering()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Update LOD groups based on camera distance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (enableLOD)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            UpdateLODGroups();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Optimize shader properties based on distance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        OptimizeShaderProperties();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Manage texture streaming</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (enableTextureStreaming)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            OptimizeTextureStreaming();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void UpdateLODGroups()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Camera mainCamera = Camera.main;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (mainCamera == null) return;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        foreach (var kvp in m_LODGroups)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Renderer renderer = kvp.Key;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            LODGroup lodGroup = kvp.Value;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (renderer != null &amp;&amp; lodGroup != null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // Calculate distance from camera</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float distance = Vector3.Distance(mainCamera.transform.position, renderer.bounds.center);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // Update LOD based on distance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                int lodLevel = 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                for (int i = 0; i &lt; lodDistances.Length; i++)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    if (distance &gt; lodDistances[i])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        lodLevel = i + 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // Clamp to valid range</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                lodLevel = Mathf.Min(lodLevel, lodCount - 1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // Set the current LOD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                lodGroup.ForceLOD(lodLevel);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void OptimizeShaderProperties()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Optimize shader properties based on current quality settings</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Shader.SetGlobalFloat(&quot;_OptimizationLevel&quot;, textureQuality);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Adjust various shader parameters based on performance needs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (QualitySettings.GetQualityLevel() &lt;= 1) // Low quality</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Shader.SetGlobalFloat(&quot;_ShadowQuality&quot;, 0.5f);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Shader.SetGlobalFloat(&quot;_ReflectionQuality&quot;, 0.3f);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Shader.SetGlobalFloat(&quot;_PostProcessingQuality&quot;, 0.5f);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        else if (QualitySettings.GetQualityLevel() &gt;= 4) // High quality</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Shader.SetGlobalFloat(&quot;_ShadowQuality&quot;, 1.0f);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Shader.SetGlobalFloat(&quot;_ReflectionQuality&quot;, 1.0f);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Shader.SetGlobalFloat(&quot;_PostProcessingQuality&quot;, 1.0f);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        else // Medium quality</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Shader.SetGlobalFloat(&quot;_ShadowQuality&quot;, 0.7f);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Shader.SetGlobalFloat(&quot;_ReflectionQuality&quot;, 0.7f);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Shader.SetGlobalFloat(&quot;_PostProcessingQuality&quot;, 0.7f);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void OptimizeTextureStreaming()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Adjust texture streaming based on available memory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        float availableMemory = SystemInfo.graphicsMemorySize / 1024.0f; // MB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (availableMemory &lt; 2048.0f) // Less than 2GB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            QualitySettings.streamingMipmapsMemoryBudget = 256.0f; // Reduce budget</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            textureQuality = 0.7f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        else if (availableMemory &gt; 8192.0f) // More than 8GB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            QualitySettings.streamingMipmapsMemoryBudget = 1024.0f; // Increase budget</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            textureQuality = 1.0f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            QualitySettings.streamingMipmapsMemoryBudget = 512.0f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            textureQuality = 0.8f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Method to get rendering performance metrics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public RenderingPerformanceMetrics GetPerformanceMetrics()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RenderingPerformanceMetrics metrics = new RenderingPerformanceMetrics();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        metrics.triangleCount = 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        metrics.drawCallCount = UnityEngine.Rendering.UnityStats.drawCalls;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        metrics.renderingTime = UnityEngine.Rendering.UnityStats.renderTime;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        metrics.shadowCasters = UnityEngine.Rendering.UnityStats.shadowCasters;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Calculate triangle count for robot parts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        GameObject[] robotParts = GameObject.FindGameObjectsWithTag(&quot;RobotPart&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        foreach (GameObject part in robotParts)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            MeshFilter meshFilter = part.GetComponent&lt;MeshFilter&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (meshFilter != null &amp;&amp; meshFilter.sharedMesh != null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                metrics.triangleCount += meshFilter.sharedMesh.triangles.Length / 3;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return metrics;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[System.Serializable]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class RenderingPerformanceMetrics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public int triangleCount;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public int drawCallCount;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public float renderingTime;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public int shadowCasters;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public float averageFrameTime;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public float peakMemoryUsage;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="performance-monitoring-system">Performance Monitoring System<a href="#performance-monitoring-system" class="hash-link" aria-label="Direct link to Performance Monitoring System" title="Direct link to Performance Monitoring System" translate="no">‚Äã</a></h3>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">using UnityEngine;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using UnityEngine.UI;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using System.Collections.Generic;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class PerformanceMonitor : MonoBehaviour</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [Header(&quot;Performance UI&quot;)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Text performanceText;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Slider qualitySlider;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [Header(&quot;Performance Thresholds&quot;)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public float targetFrameRate = 60.0f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public float warningFrameRate = 30.0f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public float criticalFrameRate = 15.0f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private List&lt;float&gt; frameTimes = new List&lt;float&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private const int frameHistoryCount = 60; // Last 60 frames</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    void Start()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (qualitySlider != null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            qualitySlider.onValueChanged.AddListener(OnQualityChanged);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    void Update()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        UpdatePerformanceMetrics();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        UpdatePerformanceUI();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void UpdatePerformanceMetrics()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Add current frame time to history</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        float currentFrameTime = Time.unscaledDeltaTime;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        frameTimes.Add(currentFrameTime);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Keep only the last N frame times</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (frameTimes.Count &gt; frameHistoryCount)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            frameTimes.RemoveAt(0);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void UpdatePerformanceUI()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (performanceText != null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            float avgFrameTime = GetAverageFrameTime();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            float avgFrameRate = avgFrameTime &gt; 0 ? 1.0f / avgFrameTime : 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            float minFrameTime = GetMinFrameTime();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            float maxFrameTime = GetMaxFrameTime();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            float minFrameRate = minFrameTime &gt; 0 ? 1.0f / minFrameTime : 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            float maxFrameRate = maxFrameTime &gt; 0 ? 1.0f / maxFrameTime : 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            string performanceInfo = $&quot;Frame Rate: {avgFrameRate:F1} FPS\n&quot; +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                   $&quot;Avg Frame Time: {avgFrameTime * 1000:F1} ms\n&quot; +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                   $&quot;Min/Max: {minFrameRate:F1}/{maxFrameRate:F1} FPS\n&quot; +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                   $&quot;Draw Calls: {UnityEngine.Rendering.UnityStats.drawCalls}\n&quot; +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                   $&quot;Triangles: {UnityEngine.Rendering.UnityStats.triangles}\n&quot; +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                   $&quot;Shadow Casters: {UnityEngine.Rendering.UnityStats.shadowCasters}\n&quot; +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                   $&quot;Memory: {UnityEngine.Profiling.Profiler.GetTotalAllocatedMemoryLong() / (1024 * 1024)} MB&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            performanceText.text = performanceInfo;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // Color code based on performance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (avgFrameRate &lt; criticalFrameRate)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                performanceText.color = Color.red;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            else if (avgFrameRate &lt; warningFrameRate)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                performanceText.color = Color.yellow;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                performanceText.color = Color.green;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private float GetAverageFrameTime()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (frameTimes.Count == 0) return 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        float sum = 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        foreach (float time in frameTimes)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            sum += time;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return sum / frameTimes.Count;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private float GetMinFrameTime()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (frameTimes.Count == 0) return 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        float min = float.MaxValue;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        foreach (float time in frameTimes)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (time &lt; min) min = time;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return min;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private float GetMaxFrameTime()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (frameTimes.Count == 0) return 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        float max = 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        foreach (float time in frameTimes)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (time &gt; max) max = time;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return max;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void OnQualityChanged(float quality)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Adjust quality settings based on slider value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int qualityLevel = Mathf.RoundToInt(quality * (QualitySettings.names.Length - 1));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        QualitySettings.SetQualityLevel(qualityLevel);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Adjust rendering optimization parameters</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        HumanoidRobotRenderingOptimizer optimizer = FindObjectOfType&lt;HumanoidRobotRenderingOptimizer&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (optimizer != null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            optimizer.textureQuality = quality;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to Summary" title="Direct link to Summary" translate="no">‚Äã</a></h2>
<p>Unity rendering techniques for humanoid robot digital twins require a comprehensive approach that balances visual quality with performance. The implementation involves several key components:</p>
<ol>
<li class=""><strong>Graphics Pipeline</strong>: Custom render passes and SRP configuration for specialized robot rendering needs</li>
<li class=""><strong>Materials and Shaders</strong>: PBR implementation with robot-specific surface properties and detailed material systems</li>
<li class=""><strong>Lighting Systems</strong>: Realistic lighting setups with scenario-based configurations for different environments</li>
<li class=""><strong>Post-Processing Effects</strong>: Advanced visual effects for enhanced realism and specialized robot vision modes</li>
<li class=""><strong>Performance Optimization</strong>: LOD systems, occlusion culling, and real-time performance monitoring</li>
</ol>
<p>The technical implementation includes C# scripts for managing complex rendering systems, HLSL shaders for custom visual effects, and comprehensive optimization techniques. These systems work together to create realistic digital twins that accurately represent humanoid robots in various environments while maintaining real-time performance.</p>
<p>The modular architecture allows for easy customization based on specific robot designs and simulation requirements. The system supports multiple viewing scenarios, dynamic lighting conditions, and real-time performance adjustments to ensure optimal visual quality across different hardware configurations.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/sherazi-412002/ai-native-sdd-books/tree/main/docs/module-2/unity-rendering.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/ebsite/docs/docs/module-2/physics-collisions"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Physics and Collisions: Advanced Simulation for Digital Twins of Humanoid Robots</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/ebsite/docs/docs/module-2/sensor-simulation"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Sensor Simulation: Advanced Perceptual Systems for Humanoid Robot Digital Twins</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#visual-rendering-in-digital-twins" class="table-of-contents__link toc-highlight">Visual Rendering in Digital Twins</a></li><li><a href="#unity-graphics-pipeline" class="table-of-contents__link toc-highlight">Unity Graphics Pipeline</a></li><li><a href="#materials-and-shaders" class="table-of-contents__link toc-highlight">Materials and Shaders</a><ul><li><a href="#pbr-shader-implementation" class="table-of-contents__link toc-highlight">PBR Shader Implementation</a></li><li><a href="#material-system-for-robot-components" class="table-of-contents__link toc-highlight">Material System for Robot Components</a></li><li><a href="#shader-graph-implementation" class="table-of-contents__link toc-highlight">Shader Graph Implementation</a></li></ul></li><li><a href="#lighting-systems" class="table-of-contents__link toc-highlight">Lighting Systems</a><ul><li><a href="#realistic-lighting-setup" class="table-of-contents__link toc-highlight">Realistic Lighting Setup</a></li><li><a href="#lighting-diagram" class="table-of-contents__link toc-highlight">Lighting Diagram</a></li></ul></li><li><a href="#post-processing-effects" class="table-of-contents__link toc-highlight">Post-Processing Effects</a><ul><li><a href="#post-processing-implementation" class="table-of-contents__link toc-highlight">Post-Processing Implementation</a></li><li><a href="#custom-post-processing-effect-for-robot-vision" class="table-of-contents__link toc-highlight">Custom Post-Processing Effect for Robot Vision</a></li></ul></li><li><a href="#performance-optimization" class="table-of-contents__link toc-highlight">Performance Optimization</a><ul><li><a href="#rendering-optimization-techniques" class="table-of-contents__link toc-highlight">Rendering Optimization Techniques</a></li><li><a href="#performance-monitoring-system" class="table-of-contents__link toc-highlight">Performance Monitoring System</a></li></ul></li><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li></ul></div></div></div><div class="translationPlaceholder_ZaM6 bottom_NSNn"><div class="translationContainer_wPd3"><span class="translationIcon_SpMr">üåê</span><select class="translationSelect_x1CZ" disabled=""><option>English (en)</option><option disabled="">Urdu (ur) - Coming Soon</option></select><span class="translationBadge_Yny3">Phase 3 Feature</span></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/ebsite/docs/docs/intro">Tutorial</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://x.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/ebsite/docs/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2025 My Project, Inc. Built with Docusaurus.</div></div></div></footer><div class="chatWidgetContainer_tL34"><button class="chatWidgetCollapsed_ZkDa"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C6.48 2 2 6.48 2 12C2 13.54 2.36 15.01 3.02 16.32L2 22L7.68 20.98C8.99 21.64 10.46 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM8 16L10 14L12 16L16 12L14 10L12 12L8 8L6 10L10 14L8 16Z" fill="white"></path></svg></button></div></div>
</body>
</html>